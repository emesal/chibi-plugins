#!/bin/bash
# Read the contents of a file

if [[ "$1" == "--schema" ]]; then
  cat <<'EOF'
{
  "name": "read_file",
  "description": "Read and return the contents of a file",
  "parameters": {
    "type": "object",
    "properties": {
      "path": {
        "type": "string",
        "description": "Path to the file to read"
      }
    },
    "required": ["path"]
  }
}
EOF
  exit 0
fi

# Read args from stdin
path=$(jq -r '.path' < /dev/stdin)

if [[ -z "$path" || "$path" == "null" ]]; then
  echo "Error: path parameter is required" >&2
  exit 1
fi

if [[ ! -f "$path" ]]; then
  echo "Error: file not found: $path" >&2
  exit 1
fi

cat "$path"
